(this["webpackJsonppilararriaga-dwfe9-aplicacion-web-fullstack"]=this["webpackJsonppilararriaga-dwfe9-aplicacion-web-fullstack"]||[]).push([[0],{20:function(e,t,c){},27:function(e,t,c){},31:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(22),o=c.n(s),i=(c(27),c(6)),r=c(13);c(40),c(29);0===r.a.apps.length&&r.a.initializeApp({apiKey:"AIzaSyAy-kXSqE91esIVtnRfZGW8B2LCcU90KGs",authDomain:"tweets-proyect-4.firebaseapp.com",projectId:"tweets-proyect-4",storageBucket:"tweets-proyect-4.appspot.com",messagingSenderId:"1094361259456",appId:"1:1094361259456:web:e1e1a356e0b90307ed3c25",measurementId:"G-XJR39SZYHJ"});var l=r.a.firestore(),u=r.a.auth(),d=new r.a.auth.GoogleAuthProvider,j=function(){return u.signInWithPopup(d)},b=function(){return u.currentUser},m=(r.a,c.p+"static/media/buttonGoogle.f2256fdf.svg"),O=(c(31),c(1));var h=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"logging-container",children:[Object(O.jsx)("h1",{className:"welcome-title",children:"Bienvenido a Devs_united!"}),Object(O.jsx)("h4",{className:"logging-title",children:"Registrate ahora!"}),Object(O.jsx)("button",{type:"button",onClick:j,className:"button-logging",children:Object(O.jsx)("img",{src:m,className:"google-button",alt:"googleButton"})})]})})},p=c(5);c(33),c(20);var g=function(){var e=Object(p.f)(),t=b(),c=Object(a.useState)(!1),n=Object(i.a)(c,2),s=n[0],o=n[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],m=Object(a.useState)(""),h=Object(i.a)(m,2),g=h[0],f=h[1],x=function(e){j(e.currentTarget.dataset.color)};return Object(O.jsx)(O.Fragment,{children:s?Object(O.jsx)("div",{className:"loader"}):Object(O.jsxs)("div",{className:"welcome-container",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:"welcome",children:"WELCOME "}),Object(O.jsxs)("span",{className:"welcome beta",children:[t.displayName,"!"]})]}),Object(O.jsx)("input",{type:"text",placeholder:"Type your username",className:"username",onChange:function(e){f(e.target.value)},maxLength:"18"}),Object(O.jsx)("div",{className:"p-select-color",children:"Select your favorite color"}),Object(O.jsxs)("div",{className:"colors-container",children:[Object(O.jsx)("button",{className:"color-button beta-background",type:"button",onClick:x,"data-color":"beta"}),Object(O.jsx)("button",{className:"color-button orange",type:"button",onClick:x,"data-color":"orange"}),Object(O.jsx)("button",{className:"color-button yellow",type:"button",onClick:x,"data-color":"yellow"}),Object(O.jsx)("button",{className:"color-button green",type:"button",onClick:x,"data-color":"green"}),Object(O.jsx)("button",{className:"color-button blue",type:"button",onClick:x,"data-color":"blue"}),Object(O.jsx)("button",{className:"color-button purple",type:"button",onClick:x,"data-color":"purple"})]}),Object(O.jsx)("button",{type:"button",className:"continue-button",onClick:function(c){""!==d&&0!==g.length?(o(!0),setTimeout((function(){l.collection("users").doc(t.uid).set({name:t.displayName,email:t.email,color:d,username:g}),o(!1),e("/feed")}),2e3)):(console.log("aqui"),alert("You need to pick a user name and a color!"))},children:"CONTINUE"})]})})},f=c.p+"static/media/logo.d70e54fc.svg";c(34);var x=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"start-page",children:[Object(O.jsx)("div",{className:"logo-container",children:Object(O.jsx)("img",{src:f,className:"logo",alt:"logo"})}),Object(O.jsxs)("div",{className:"is-logged-container",children:[null!==u.currentUser&&null!==u.currentUser.uid?Object(O.jsx)(g,{}):Object(O.jsx)(h,{}),Object(O.jsxs)("div",{className:"copyright-footer",children:[Object(O.jsx)("span",{className:"copyright",children:"\xa9 2020 Devs_United - "}),Object(O.jsx)("span",{className:"copyright beta",children:"BETA"})]})]})]})})},v=c(11),N=c(15),w=c.n(N),y=c(16),k=c.p+"static/media/full-heart.cfe63298.svg",S=c.p+"static/media/emptyHeart.0a53b79e.svg",C=c.p+"static/media/garbage.521b1cb8.svg",L=(c(36),function(e){var t,c,n,s,o=e.tweet,r=o.id,u=o.userId,d=b(),j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=Object(a.useState)(!1),h=Object(i.a)(m,2),p=h[0],g=h[1],f=Object(a.useState)(),x=Object(i.a)(f,2),v=x[0],N=x[1],L=Object(a.useState)(""),I=Object(i.a)(L,2),U=I[0],E=I[1],T=Object(a.useState)(""),A=Object(i.a)(T,2),R=A[0],B=A[1];Object(a.useEffect)((function(){var e=o.tweetLikes.find((function(e){return e===d.uid}));N(e)}),[o.tweetLikes,d.uid]),Object(a.useEffect)((function(){return l.doc("users/".concat(o.userId)).get().then((function(e){E(e.data().color),B(e.data().username)})),console.log("exit")}),[o.userId]);var D=function(){var e=Object(y.a)(w.a.mark((function e(){var t,c,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,l.doc("tweets/".concat(o.id)).get();case 3:t=e.sent,c=t.data().tweetLikes.indexOf(d.uid),a=t.data().tweetLikes,c>=0?(N(!1),a.splice(c,1)):(N(!0),a.push(d.uid)),l.doc("tweets/".concat(o.id)).update({tweetLikes:a}),g(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"tweet-card",children:[Object(O.jsx)("img",{className:"tweet-user-img",src:o.photo,alt:"Tweet user"}),Object(O.jsxs)("div",{className:"tweet-container",children:[Object(O.jsxs)("div",{className:"tweet-header",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:"username-".concat(U),children:R}),Object(O.jsxs)("span",{className:"date",children:["- ",function(e){var t=new Date(e);return"".concat(t.getDate()).concat(j[t.getMonth()])}(o.date),"."]})]}),u===(null===d||void 0===d?void 0:d.uid)?Object(O.jsx)("button",{onClick:function(){window.confirm("\xbfSeguro que quiere borrar su Tweet?")&&l.doc("tweets/".concat(r)).delete()},className:"garbage",children:Object(O.jsx)("img",{src:C,className:"garbage",alt:"garbage"})}):Object(O.jsx)(O.Fragment,{})]}),Object(O.jsx)("h4",{children:o.tweet}),null!=d?Object(O.jsxs)("div",{className:"tweet-footer",children:[Object(O.jsx)("button",{onClick:D,className:"heart-button",disabled:p,children:v?Object(O.jsx)("img",{src:k,className:"full-heart heart-button",alt:"full-heart"}):Object(O.jsx)("img",{src:S,className:"empty-heart heart-button",alt:"empty-heart"})}),Object(O.jsx)("span",{className:"likes-number ".concat(v?"red-number":""),children:null!==(t=null===(c=o.tweetLikes)||void 0===c?void 0:c.length)&&void 0!==t?t:0})]}):Object(O.jsx)("div",{className:"likes-number ".concat(v?"red-number":""),children:null!==(n=null===(s=o.tweetLikes)||void 0===s?void 0:s.length)&&void 0!==n?n:0})]})]},o.id)});var I=n.a.memo(L,(function(e,t){return function(e,t){return e.tweet.tweetLikes.length===t.tweet.tweetLikes.length}(e,t)})),U=c.p+"static/media/header-title.0f17436c.svg",E=c.p+"static/media/post.dbd261de.svg",T=c.p+"static/media/smalllogo.5038d75e.svg";c(37);var A=function(){var e=Object(p.f)(),t=b(),c=Object(a.useState)({author:"",tweetLikes:[],photo:"",tweet:"",user:null!==t?t.uid:"",id:""}),n=Object(i.a)(c,2),s=n[0],o=n[1],r=Object(a.useState)(""),d=Object(i.a)(r,2),j=d[0],m=d[1],h=Object(a.useState)([]),g=Object(i.a)(h,2),f=g[0],x=g[1],N=Object(a.useState)(""),w=Object(i.a)(N,2),y=w[0],k=w[1],S=j.length/2+"%";Object(a.useEffect)((function(){u.onAuthStateChanged((function(t){if(null!==t){l.doc("users/".concat(t.uid)).get().then((function(e){k(e.data().color)}));var c=l.collection("tweets").orderBy("date","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return l.doc("tweets/".concat(e.id)).update({id:e.id}),Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id})}),(function(){console.error("Sucedio un error")}));x(t)}),(function(e){console.error(e)}));return function(){c()}}e("/tweets-app")}))}),[e]);var C=function(e){e.preventDefault();try{l.collection("tweets").add(s)}catch(t){console.error(t)}m("")};return Object(O.jsxs)("div",{className:"feed",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsxs)("div",{className:"header-container",children:[Object(O.jsx)("button",{type:"button",className:"header-user",onClick:function(t){e("/userprofile")},children:Object(O.jsx)("img",{src:null===t||void 0===t?void 0:t.photoURL,className:"header-user border-".concat(y),alt:"Header user"})}),Object(O.jsx)("img",{src:T,className:"small-logo",alt:"Small Logo"}),Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:U,className:"header-title",alt:"Header title"})})]})}),Object(O.jsxs)("div",{className:"tweets-container",children:[Object(O.jsx)("div",{className:"input-container",children:Object(O.jsxs)("div",{className:"input-block",children:[Object(O.jsx)("img",{src:null===t||void 0===t?void 0:t.photoURL,alt:"User",className:"form-user"}),Object(O.jsxs)("form",{className:"form-container",children:[Object(O.jsx)("textarea",{onChange:function(e){var c=new Date,a=Object(v.a)(Object(v.a)({},s),{},{author:t.displayName,photo:t.photoURL,tweet:e.target.value,userId:t.uid,date:c.getTime()+c.getMinutes()+c.getSeconds()});o(a),m(a.tweet)},onKeyDown:function(e){"Enter"===e.key&&C(e)},className:"text-area",placeholder:"What's happening?",value:j,name:"tweet",min:"0",max:"200",maxLength:"200"}),Object(O.jsx)("div",{className:"tweet-length-bar",style:{width:S}}),Object(O.jsxs)("div",{className:"text-area-details",children:[Object(O.jsx)("span",{className:"tweet-length",children:j.length}),Object(O.jsx)("span",{className:"max-tweet-length",children:"200 max."})]}),Object(O.jsx)("div",{className:"post-button-container",children:Object(O.jsx)("button",{type:"submit",onClick:C,disabled:!j,className:"post-button",children:Object(O.jsx)("img",{src:E,className:"post-img",alt:"post-button"})})})]})]})}),Object(O.jsx)("div",{className:"tweets-list",children:f.map((function(e){return Object(O.jsx)(I,{tweet:e},e.id)}))})]})]})},R=c.p+"static/media/arrow.67f326fd.svg",B=c.p+"static/media/imglogout.a36fdd73.svg";c(38);var D=function(){var e=Object(p.f)(),t=b(),c=Object(a.useState)([]),n=Object(i.a)(c,2),s=n[0],o=n[1],r=Object(a.useState)(!1),d=Object(i.a)(r,2),j=d[0],m=d[1],h=Object(a.useState)([]),g=Object(i.a)(h,2),f=g[0],x=g[1],N=Object(a.useState)(""),k=Object(i.a)(N,2),S=k[0],C=k[1],L=Object(a.useState)(""),U=Object(i.a)(L,2),E=U[0],T=U[1],A=function(){m(!0),u.onAuthStateChanged((function(e){null!==e&&l.collection("tweets").orderBy("date","desc").where("userId","==",e.uid).onSnapshot((function(t){var c=t.docs.map((function(t){return Object(v.a)(Object(v.a)({},t.data()),{},{key:t.data().id,id:t.data().id,photoURL:e.photoURL})}));x(c)}))}))},D=function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!1),l.collection("tweets").orderBy("date","desc").where("tweetLikes","array-contains",t.uid).onSnapshot((function(e){var c=e.docs.map((function(e){return Object(v.a)(Object(v.a)({},e.data()),{},{key:e.data().id,id:e.data().id,photoURL:t.photoURL})}));o(c)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u.onAuthStateChanged((function(t){if(null!==t){l.doc("users/".concat(t.uid)).get().then((function(e){C(e.data().color),T(e.data().username)}));var c=A();return function(){c()}}e("/tweets-app")}))}),[e]),Object(O.jsxs)("div",{className:"profile-container",children:[Object(O.jsx)("div",{className:"profile-header-container",children:Object(O.jsxs)("div",{className:"profile-header",children:[Object(O.jsx)("button",{type:"button",className:"back-button",onClick:function(t){e("/feed")},children:Object(O.jsxs)("div",{className:"back-div",children:[Object(O.jsx)("img",{src:R,className:"arrow",alt:"arrow"}),Object(O.jsx)("div",{className:"header-username",children:E})]})}),Object(O.jsxs)("button",{type:"button",className:"button-logout",onClick:function(t){u.signOut(),e("/")},children:["LOGOUT",Object(O.jsx)("img",{src:B,className:"img-logout",alt:"logout"})]})]})}),Object(O.jsx)("div",{className:"profile-main-container",children:Object(O.jsxs)("div",{className:"profile-main",children:[Object(O.jsx)("img",{src:null===t||void 0===t?void 0:t.photoURL,className:"profile-photo border-".concat(S),alt:"user"}),Object(O.jsx)("div",{className:"user-color username-".concat(S),children:E}),Object(O.jsxs)("div",{className:"tabs-buttons",children:[Object(O.jsx)("button",{type:"button",onClick:A,className:"tabs ".concat(j?"tabs-light":""),children:"POSTS"}),Object(O.jsx)("button",{type:"button",onClick:D,className:"tabs ".concat(j?"":"tabs-light"),children:"FAVORITES"})]})]})}),Object(O.jsx)("div",{className:"tweets-list",children:j?f.map((function(e){return Object(O.jsx)(I,{tweet:e},e.id)})):s.map((function(e){return Object(O.jsx)(I,{tweet:e},e.id)}))})]})};var F=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),c=(t[0],t[1]);return Object(a.useEffect)((function(){u.onAuthStateChanged((function(e){c(e)}))}),[]),Object(O.jsx)("div",{className:"app",children:Object(O.jsxs)(p.c,{children:[Object(O.jsx)(p.a,{exact:!0,path:"/",element:Object(O.jsx)(x,{})}),Object(O.jsx)(p.a,{path:"/feed",element:Object(O.jsx)(A,{})}),Object(O.jsx)(p.a,{path:"/userprofile",element:Object(O.jsx)(D,{})}),Object(O.jsx)(p.a,{path:"/tweets-app",element:Object(O.jsx)(x,{})})]})})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,41)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;c(e),a(e),n(e),s(e),o(e)}))},G=c(14);o.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(G.a,{children:Object(O.jsx)(F,{})})}),document.getElementById("root")),J()}},[[39,1,2]]]);
//# sourceMappingURL=main.7b44f005.chunk.js.map